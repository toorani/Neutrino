<div ng-controller="promotion.branchShare.ceo.itemController" ng-init="initializeController()" class="fragment {{transitionState}}">
    <div class="row">
        <div class="col-md-12">
            <!--Top header start-->
            <h3 class="ls-top-header breadcrumb">{{title}}</h3>
            <!--Top header end -->
        </div>
    </div>
    <div class="row">
        <div class="col-md-12">
            <div class="panel panel-default">
                <div class="panel-body">
                    <div class="panel panel-dark"  ng-show="branchPromotoinDetail.promotionReviewStatusId == 2">
                        <div class="panel-heading">
                            <h3 class="panel-title">اطلاعات پورسانت مرکز {{branchPromotoinDetail.branchName}} </h3>
                        </div>
                        <div class="panel-body">
                            <div class="row">
                                <div class="col-md-12">
                                    <div class="row">
                                        <label class="col-md-1 control-label">
                                            فروش
                                        </label>
                                        <div class="col-md-2 ">
                                            <label class="dir-ltr bold">{{branchPromotoinDetail.totalSalesPromotion  | number}}</label>
                                        </div>

                                        <label class="col-md-1 control-label">
                                            تامین کننده
                                        </label>
                                        <div class="col-md-2 ">
                                            <label class="dir-ltr bold">{{branchPromotoinDetail.supplierPromotion | number}}</label>
                                        </div>
                                        <label class="col-md-1 control-label">
                                            وصول
                                        </label>
                                        <div class="col-md-2 ">
                                            <label class="dir-ltr bold">{{branchPromotoinDetail.totalReceiptPromotion + branchPromotoinDetail.privateReceiptPromotion | number}}</label>
                                        </div>
                                        <label class="col-md-1 control-label">
                                            ترمیمی
                                        </label>
                                        <div class="col-md-2 ">
                                            <label class="dir-ltr bold">{{branchPromotoinDetail.compensatoryPromotion  | number}}</label>
                                        </div>

                                    </div>
                                    <label class="col-md-1 control-label">
                                        جمع
                                    </label>
                                    <div class="col-md-2 ">
                                        <label class="dir-ltr bold">{{branchPromotoinDetail.supplierPromotion + branchPromotoinDetail.compensatoryPromotion + branchPromotoinDetail.totalReceiptPromotion + branchPromotoinDetail.privateReceiptPromotion + branchPromotoinDetail.totalSalesPromotion  | number :0}}</label>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div  ng-show="branchPromotoinDetail.promotionReviewStatusId == 2">
                        <form novalidate role="form" esp-validate-complete="submit()"
                              esp-validate-options="{promptPosition:'bottomLeft',autoPositionUpdate: true
                                  ,autoHidePrompt:true}"
                              class="form-horizontal ls_form" name="form">

                            <table class="table table-bordered table-striped " cellspacing="0">
                                <thead class="bold">
                                    <tr>
                                        <td width="60px"></td>
                                        <td class="text-center">
                                            <input type="text" class="form-control" ng-model="member_srch" />
                                        </td>
                                    </tr>
                                    <tr>
                                        <td class="align-center" rowspan="2" width="60px">#</td>
                                        <td class="align-center" style="vertical-align:middle" rowspan="2"> نام کامل</td>
                                        <td style="vertical-align:middle" class="align-center">پورسانت تایید شده مرکز</td>
                                        <td style="vertical-align:middle" class="align-center" rowspan="2">مانده جرائم</td>
                                        <td style="vertical-align:middle" class="align-center" rowspan="2">جرائم ماه</td>
                                        <td style="vertical-align:middle" class="align-center" rowspan="2">کسورات ماه</td>
                                        <td style="vertical-align:middle" class="align-center" rowspan="2">مطالبات</td>
                                        <td style="vertical-align:middle" class="align-center" rowspan="2">ذخیره</td>
                                        <td style="vertical-align:middle" class="align-center" rowspan="2">توضیحات</td>
                                    </tr>
                                    <tr>
                                        <td class="align-center">پورسانت نهایی</td>
                                    </tr>
                                </thead>
                            </table>

                            <div class="table-responsive ls-table" style="height:400px;overflow-x:auto">
                                <table class="table table-striped " cellspacing="0">
                                    <tr ng-repeat="record in memberPenalties | filter : {memberName :member_srch } ">
                                        <td class="text-center" style="vertical-align:middle;" width="60px">
                                            {{$index + 1}}
                                        </td>
                                        <td class="text-center" style="vertical-align:middle">
                                            {{record.memberName}}
                                        </td>
                                        <td class="align-center dir-ltr">
                                            {{record.managerPromotion | number}}
                                            <div class="ls_divider"></div>
                                            {{record.managerPromotion - record.deduction +record.credit  | number}}
                                        </td>
                                        <td class="align-center">
                                            <input type="text" class="form-control dir-ltr"
                                                   ng-model="record.remainingPenalty"
                                                   ng-disabled="record.hasPerviousData"
                                                   ng-trim=false
                                                   awnum="price">
                                        </td>
                                        <td class="align-center">
                                            <input type="text" class="form-control dir-ltr"
                                                   ng-model="record.penalty"
                                                   ng-trim=false
                                                   awnum="price">
                                        </td>
                                        <td class="align-center">
                                            <input type="text" class="form-control dir-ltr"
                                                   ng-model="record.deduction"
                                                   ng-trim=false
                                                   awnum="price">
                                        </td>
                                        <td class="align-center">
                                            <input type="text" class="form-control dir-ltr"
                                                   ng-model="record.credit"
                                                   ng-trim=false
                                                   awnum="price">
                                        </td>
                                        <td class="align-center">
                                            <input type="text" class="form-control dir-ltr"
                                                   ng-model="record.saved"
                                                   ng-trim=false
                                                   awnum="price">
                                        </td>
                                        <td class="align-center">
                                            <textarea type="text" class="form-control"
                                                      ng-model="record.description" />
                                        </td>
                                    </tr>

                                </table>
                            </div>
                            <table class="table table-striped" cellspacing="0">
                                <tfoot class="bold">
                                    <tr ng-show="memberPenalties.length != 0">
                                        <td class="text-center" colspan="2" style="vertical-align:middle">
                                            جمع پورسانت
                                        </td>
                                        <td class="align-right dir-ltr">
                                            {{getTotalManagerPromotion() | number}}
                                            <div class="ls_divider"></div>
                                            <span class="bold">
                                                {{ getTotalCEOPromotion() | number}}
                                            </span>
                                        </td>
                                        <td colspan="7"></td>
                                    </tr>
                                </tfoot>
                            </table>
                            <div class="alert alert-warning" >
                                <i class="fa fa-warning"></i>
                                لطفا پس از اتمام تعیین پورسانت پرسنل ،جهت ارسال اطلاعات از گزینه <strong>تایید نهایی و ارسال اطلاعات</strong> استفاده نماید.
                                توجه داشته باشید که بعد از زدن این گزینه امکان تغییر اطلاعات وجود ندارد
                            </div>
                            
                            <div class="modal-footer">
                                <button type="submit"
                                        name="Add"
                                        class="btn btn-success">
                                    <i class="fa fa-check"></i>
                                    <span>ثبت</span>
                                </button>
                                <button type="button"
                                       
                                        ng-click="releaseCEO()"
                                        class="btn btn-danger">
                                    <i class="fa fa-send-o"></i>
                                    <span>تایید نهایی و ارسال اطلاعات</span>
                                </button>
                                <button type="button" class="btn btn-default" ng-click="cancel()">
                                    <i class="fa fa-mail-forward"></i>
                                    <span>بازگشت</span>
                                </button>

                            </div>
                        </form>
                    </div>
                    <div class="alert alert-warning" ng-if="branchPromotoinDetail.promotionReviewStatusId != 2">
                        <strong> پورسانت تقسیم و برای تایید نهایی به مرکز ارسال شده است.</strong>
                    </div>
                </div>
            </div>
        </div>


    </div>
